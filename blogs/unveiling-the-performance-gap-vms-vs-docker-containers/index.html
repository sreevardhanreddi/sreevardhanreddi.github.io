<!doctype html><html lang=en><head><title>Unveiling the Performance Gap: Vms vs Docker Containers ::
sreevardhanreddi.github.io — Software Developer</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In the world of application deployment, two popular options have emerged: running applications on virtual machines (VMs) and using Docker containers. While both approaches have their merits, performance is a critical factor to consider. In this article, we will compare the performance differences between running an application on a VM and running it in a Docker container.
Understanding Virtual Machines (VMs) Virtual machines are essentially emulated hardware environments that run on a physical server."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://sreevardhanreddi.github.io/blogs/unveiling-the-performance-gap-vms-vs-docker-containers/><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://sreevardhanreddi.github.io/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://sreevardhanreddi.github.io/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://sreevardhanreddi.github.io/img/favicon.png><link href=/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Unveiling the Performance Gap: Vms vs Docker Containers"><meta name=twitter:description content="In the world of application deployment, two popular options have emerged: running applications on virtual machines (VMs) and using Docker containers. While both approaches have their merits, performance is a critical factor to consider. In this article, we will compare the performance differences between running an application on a VM and running it in a Docker container.
Understanding Virtual Machines (VMs) Virtual machines are essentially emulated hardware environments that run on a physical server."><meta property="og:title" content="Unveiling the Performance Gap: Vms vs Docker Containers"><meta property="og:description" content="In the world of application deployment, two popular options have emerged: running applications on virtual machines (VMs) and using Docker containers. While both approaches have their merits, performance is a critical factor to consider. In this article, we will compare the performance differences between running an application on a VM and running it in a Docker container.
Understanding Virtual Machines (VMs) Virtual machines are essentially emulated hardware environments that run on a physical server."><meta property="og:type" content="article"><meta property="og:url" content="https://sreevardhanreddi.github.io/blogs/unveiling-the-performance-gap-vms-vs-docker-containers/"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2023-06-05T11:04:24+05:30"><meta property="article:modified_time" content="2023-06-05T11:04:24+05:30"><meta property="og:site_name" content="sreevardhanreddi.github.io"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>developer</span>
<span class=logo__cursor></span></a>
<span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/>/</a></li><li><a href=/blogs>Blogs</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/>/</a></li><li><a href=/blogs>Blogs</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><article class=post><h1 class=post-title>Unveiling the Performance Gap: Vms vs Docker Containers</h1><div class=post-meta><time class=post-date>2023-06-05</time>
<span class=post-read-time>— 6 min read</span></div><span class=post-tags><a href=https://sreevardhanreddi.github.io/tags/docker/>#Docker</a>&nbsp;
<a href=https://sreevardhanreddi.github.io/tags/virtualization/>#Virtualization</a>&nbsp;
<a href=https://sreevardhanreddi.github.io/tags/containers/>#Containers</a>&nbsp;
<a href=https://sreevardhanreddi.github.io/tags/performance/>#Performance</a>&nbsp;</span><div class=post-content><p>In the world of application deployment, two popular options have emerged: running applications on virtual machines (VMs) and using Docker containers. While both approaches have their merits, performance is a critical factor to consider. In this article, we will compare the performance differences between running an application on a VM and running it in a Docker container.</p><p>Understanding Virtual Machines (VMs)
Virtual machines are essentially emulated hardware environments that run on a physical server. Each VM has its own operating system, and multiple VMs can coexist on the same physical server. The VM&rsquo;s resources are allocated from the host machine&rsquo;s pool of resources, such as CPU, memory, and storage. This isolation provides strong security and compatibility with legacy applications.</p><p>The Rise of Docker Containers
Docker containers, on the other hand, offer a lightweight alternative to VMs. Containers are isolated environments that run on a shared operating system kernel. Instead of emulating hardware, containers leverage the host machine&rsquo;s operating system, libraries, and resources. Docker containers package an application and its dependencies into a single unit, making them portable and easy to deploy across different environments.</p><h2 id=benchmarking-a-fast-api-application>Benchmarking a FAST API application
<a href=#benchmarking-a-fast-api-application class=h-anchor aria-hidden=true>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> typing <span style=color:#f92672>import</span> Any, List, Optional, Union
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> fastapi <span style=color:#f92672>import</span> Depends, FastAPI, HTTPException, status
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> motor.core <span style=color:#f92672>import</span> Database
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> motor.motor_asyncio <span style=color:#f92672>import</span> AsyncIOMotorClient
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pydantic <span style=color:#f92672>import</span> BaseModel, Field
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app <span style=color:#f92672>=</span> FastAPI()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>_Id</span>(BaseModel):
</span></span><span style=display:flex><span>    _oid: str <span style=color:#f92672>=</span> Field(<span style=color:#f92672>...</span>, alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;$oid&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CreatedAt</span>(BaseModel):
</span></span><span style=display:flex><span>    _date: str <span style=color:#f92672>=</span> Field(<span style=color:#f92672>...</span>, alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;$date&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CompaniesSchema</span>(BaseModel):
</span></span><span style=display:flex><span>    _id: _Id
</span></span><span style=display:flex><span>    name: Optional[str]
</span></span><span style=display:flex><span>    permalink: Optional[str]
</span></span><span style=display:flex><span>    crunchbase_url: Optional[str]
</span></span><span style=display:flex><span>    homepage_url: Optional[str]
</span></span><span style=display:flex><span>    blog_url: Optional[str]
</span></span><span style=display:flex><span>    blog_feed_url: Optional[str]
</span></span><span style=display:flex><span>    twitter_username: Optional[str]
</span></span><span style=display:flex><span>    category_code: Optional[str]
</span></span><span style=display:flex><span>    number_of_employees: Optional[int]
</span></span><span style=display:flex><span>    founded_year: Optional[int]
</span></span><span style=display:flex><span>    founded_month: Optional[int]
</span></span><span style=display:flex><span>    founded_day: Optional[int]
</span></span><span style=display:flex><span>    deadpooled_year: Optional[int]
</span></span><span style=display:flex><span>    tag_list: Optional[str]
</span></span><span style=display:flex><span>    alias_list: Optional[str]
</span></span><span style=display:flex><span>    email_address: Optional[str]
</span></span><span style=display:flex><span>    phone_number: Optional[str]
</span></span><span style=display:flex><span>    description: Optional[str]
</span></span><span style=display:flex><span>    created_at: Union[CreatedAt, Any]
</span></span><span style=display:flex><span>    overview: Optional[str]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_db</span>():
</span></span><span style=display:flex><span>    db <span style=color:#f92672>=</span> AsyncIOMotorClient(os<span style=color:#f92672>.</span>getenv(<span style=color:#e6db74>&#34;MONGODB_URI&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>yield</span> db<span style=color:#f92672>.</span>sample_training
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>finally</span>:
</span></span><span style=display:flex><span>        db<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.get</span>(<span style=color:#e6db74>&#34;/records&#34;</span>, response_model<span style=color:#f92672>=</span>List[CompaniesSchema])
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_records</span>(db: Database <span style=color:#f92672>=</span> Depends(get_db)):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> db<span style=color:#f92672>.</span>get_collection(<span style=color:#e6db74>&#34;companies&#34;</span>)<span style=color:#f92672>.</span>find(limit<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)<span style=color:#f92672>.</span>to_list(length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>        print(e)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> HTTPException(
</span></span><span style=display:flex><span>            status_code<span style=color:#f92672>=</span>status<span style=color:#f92672>.</span>HTTP_500_INTERNAL_SERVER_ERROR,
</span></span><span style=display:flex><span>            detail<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Something went wrong&#34;</span>,
</span></span><span style=display:flex><span>        )
</span></span></code></pre></div><p>it&rsquo;s a simple application that connects to a MongoDB database and returns a list of 100 records from the companies collection. The application is deployed on a AWS t2.micro instance running Ubuntu 22.04. The instance has 1 vCPU and 1 GB of RAM. The MongoDB database is hosted on MongoDB Atlas. the same application is deployed on a Docker container running on the same instance. The Docker container is built using the following Dockerfile:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> python:3.10-slim</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /app</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> requirements.txt requirements.txt<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> pip install -r requirements.txt<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> . .<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>CMD</span> [<span style=color:#e6db74>&#34;uvicorn&#34;</span>, <span style=color:#e6db74>&#34;main:app&#34;</span>, <span style=color:#e6db74>&#34;--host&#34;</span>, <span style=color:#e6db74>&#34;0.0.0.0&#34;</span>, <span style=color:#e6db74>&#34;--port&#34;</span>, <span style=color:#e6db74>&#34;8000&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>lets run the application on the VM and see how it performs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>uvicorn main:app --host 0.0.0.0 --port <span style=color:#ae81ff>8000</span>
</span></span></code></pre></div><p>using k6 to benchmark the application</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>k6 run --vus <span style=color:#ae81ff>10</span> --duration 30s script.js
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>http</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;k6/http&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>sleep</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;k6&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;http://&lt;your_ip&gt;:8008/records&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sleep</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>k6 run --vus <span style=color:#ae81ff>10</span> --duration 30s script.js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          /<span style=color:#ae81ff>\ </span>     |‾‾| /‾‾/   /‾‾/
</span></span><span style=display:flex><span>     /<span style=color:#ae81ff>\ </span> /  <span style=color:#ae81ff>\ </span>    |  |/  /   /  /
</span></span><span style=display:flex><span>    /  <span style=color:#ae81ff>\/</span>    <span style=color:#ae81ff>\ </span>   |     <span style=color:#f92672>(</span>   /   ‾‾<span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   /          <span style=color:#ae81ff>\ </span>  |  |<span style=color:#ae81ff>\ </span> <span style=color:#ae81ff>\ </span>|  <span style=color:#f92672>(</span>‾<span style=color:#f92672>)</span>  |
</span></span><span style=display:flex><span>  / __________ <span style=color:#ae81ff>\ </span> |__| <span style=color:#ae81ff>\_</span>_<span style=color:#ae81ff>\ \_</span>____/ .io
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  execution: local
</span></span><span style=display:flex><span>     script: script.js
</span></span><span style=display:flex><span>     output: -
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  scenarios: <span style=color:#f92672>(</span>100.00%<span style=color:#f92672>)</span> <span style=color:#ae81ff>1</span> scenario, <span style=color:#ae81ff>10</span> max VUs, 1m0s max duration <span style=color:#f92672>(</span>incl. graceful stop<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>           * default: <span style=color:#ae81ff>10</span> looping VUs <span style=color:#66d9ef>for</span> 30s <span style=color:#f92672>(</span>gracefulStop: 30s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     data_received..................: <span style=color:#ae81ff>24</span> MB <span style=color:#ae81ff>753</span> kB/s
</span></span><span style=display:flex><span>     data_sent......................: <span style=color:#ae81ff>15</span> kB <span style=color:#ae81ff>469</span> B/s
</span></span><span style=display:flex><span>     http_req_blocked...............: avg<span style=color:#f92672>=</span>1.43ms   min<span style=color:#f92672>=</span>2.4µs    med<span style=color:#f92672>=</span>5.5µs    max<span style=color:#f92672>=</span>24.69ms  p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>12.68µs  p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>20.29ms
</span></span><span style=display:flex><span>     http_req_connecting............: avg<span style=color:#f92672>=</span>1.42ms   min<span style=color:#f92672>=</span>0s       med<span style=color:#f92672>=</span>0s       max<span style=color:#f92672>=</span>24.64ms  p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>0s       p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>20.25ms
</span></span><span style=display:flex><span>     http_req_duration..............: avg<span style=color:#f92672>=</span>907.8ms  min<span style=color:#f92672>=</span>435.27ms med<span style=color:#f92672>=</span>863.01ms max<span style=color:#f92672>=</span>2.04s    p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>1.13s    p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>1.27s
</span></span><span style=display:flex><span>       <span style=color:#f92672>{</span> expected_response:true <span style=color:#f92672>}</span>...: avg<span style=color:#f92672>=</span>907.8ms  min<span style=color:#f92672>=</span>435.27ms med<span style=color:#f92672>=</span>863.01ms max<span style=color:#f92672>=</span>2.04s    p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>1.13s    p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>1.27s
</span></span><span style=display:flex><span>     http_req_failed................: 0.00% ✓ <span style=color:#ae81ff>0</span>        ✗ <span style=color:#ae81ff>162</span>
</span></span><span style=display:flex><span>     http_req_receiving.............: avg<span style=color:#f92672>=</span>84.02ms  min<span style=color:#f92672>=</span>46.74ms  med<span style=color:#f92672>=</span>70.34ms  max<span style=color:#f92672>=</span>312.12ms p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>167.51ms p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>183.78ms
</span></span><span style=display:flex><span>     http_req_sending...............: avg<span style=color:#f92672>=</span>31.83µs  min<span style=color:#f92672>=</span>8.3µs    med<span style=color:#f92672>=</span>22.75µs  max<span style=color:#f92672>=</span>155.2µs  p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>60.36µs  p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>85µs
</span></span><span style=display:flex><span>     http_req_tls_handshaking.......: avg<span style=color:#f92672>=</span>0s       min<span style=color:#f92672>=</span>0s       med<span style=color:#f92672>=</span>0s       max<span style=color:#f92672>=</span>0s       p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>0s       p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>0s
</span></span><span style=display:flex><span>     http_req_waiting...............: avg<span style=color:#f92672>=</span>823.75ms min<span style=color:#f92672>=</span>368.48ms med<span style=color:#f92672>=</span>788.71ms max<span style=color:#f92672>=</span>1.86s    p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>1.03s    p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>1.13s
</span></span><span style=display:flex><span>     http_reqs......................: <span style=color:#ae81ff>162</span>   5.096966/s
</span></span><span style=display:flex><span>     iteration_duration.............: avg<span style=color:#f92672>=</span>1.91s    min<span style=color:#f92672>=</span>1.43s    med<span style=color:#f92672>=</span>1.86s    max<span style=color:#f92672>=</span>3.07s    p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>2.13s    p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>2.28s
</span></span><span style=display:flex><span>     iterations.....................: <span style=color:#ae81ff>162</span>   5.096966/s
</span></span><span style=display:flex><span>     vus............................: <span style=color:#ae81ff>6</span>     min<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span>      max<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>     vus_max........................: <span style=color:#ae81ff>10</span>    min<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>     max<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>running <span style=color:#f92672>(</span>0m31.8s<span style=color:#f92672>)</span>, 00/10 VUs, <span style=color:#ae81ff>162</span> complete and <span style=color:#ae81ff>0</span> interrupted iterations
</span></span><span style=display:flex><span>default ✓ <span style=color:#f92672>[======================================]</span> <span style=color:#ae81ff>10</span> VUs  30s
</span></span></code></pre></div><p>as you can see the application running on the VM is able to handle <code>5.09 requests per second</code>.</p><p>now lets run the same application on a Docker container and see how it performs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker build -t fastapi .
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -d -p 8000:8000 fastapi
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>k6 run --vus <span style=color:#ae81ff>10</span> --duration 30s script.js
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>k6 run --vus <span style=color:#ae81ff>10</span> --duration 30s script.js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          /<span style=color:#ae81ff>\ </span>     |‾‾| /‾‾/   /‾‾/
</span></span><span style=display:flex><span>     /<span style=color:#ae81ff>\ </span> /  <span style=color:#ae81ff>\ </span>    |  |/  /   /  /
</span></span><span style=display:flex><span>    /  <span style=color:#ae81ff>\/</span>    <span style=color:#ae81ff>\ </span>   |     <span style=color:#f92672>(</span>   /   ‾‾<span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   /          <span style=color:#ae81ff>\ </span>  |  |<span style=color:#ae81ff>\ </span> <span style=color:#ae81ff>\ </span>|  <span style=color:#f92672>(</span>‾<span style=color:#f92672>)</span>  |
</span></span><span style=display:flex><span>  / __________ <span style=color:#ae81ff>\ </span> |__| <span style=color:#ae81ff>\_</span>_<span style=color:#ae81ff>\ \_</span>____/ .io
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  execution: local
</span></span><span style=display:flex><span>     script: script.js
</span></span><span style=display:flex><span>     output: -
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  scenarios: <span style=color:#f92672>(</span>100.00%<span style=color:#f92672>)</span> <span style=color:#ae81ff>1</span> scenario, <span style=color:#ae81ff>10</span> max VUs, 1m0s max duration <span style=color:#f92672>(</span>incl. graceful stop<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>           * default: <span style=color:#ae81ff>10</span> looping VUs <span style=color:#66d9ef>for</span> 30s <span style=color:#f92672>(</span>gracefulStop: 30s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     data_received..................: <span style=color:#ae81ff>23</span> MB <span style=color:#ae81ff>734</span> kB/s
</span></span><span style=display:flex><span>     data_sent......................: <span style=color:#ae81ff>15</span> kB <span style=color:#ae81ff>457</span> B/s
</span></span><span style=display:flex><span>     http_req_blocked...............: avg<span style=color:#f92672>=</span>1.42ms   min<span style=color:#f92672>=</span>3µs      med<span style=color:#f92672>=</span>7.5µs    max<span style=color:#f92672>=</span>24.98ms  p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>16.81µs p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>19.87ms
</span></span><span style=display:flex><span>     http_req_connecting............: avg<span style=color:#f92672>=</span>1.41ms   min<span style=color:#f92672>=</span>0s       med<span style=color:#f92672>=</span>0s       max<span style=color:#f92672>=</span>24.96ms  p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>0s      p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>19.83ms
</span></span><span style=display:flex><span>     http_req_duration..............: avg<span style=color:#f92672>=</span>960.38ms min<span style=color:#f92672>=</span>516.79ms med<span style=color:#f92672>=</span>925.93ms max<span style=color:#f92672>=</span>2.03s    p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>1.21s   p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>1.32s
</span></span><span style=display:flex><span>       <span style=color:#f92672>{</span> expected_response:true <span style=color:#f92672>}</span>...: avg<span style=color:#f92672>=</span>960.38ms min<span style=color:#f92672>=</span>516.79ms med<span style=color:#f92672>=</span>925.93ms max<span style=color:#f92672>=</span>2.03s    p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>1.21s   p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>1.32s
</span></span><span style=display:flex><span>     http_req_failed................: 0.00% ✓ <span style=color:#ae81ff>0</span>        ✗ <span style=color:#ae81ff>158</span>
</span></span><span style=display:flex><span>     http_req_receiving.............: avg<span style=color:#f92672>=</span>77.26ms  min<span style=color:#f92672>=</span>58.23ms  med<span style=color:#f92672>=</span>68.24ms  max<span style=color:#f92672>=</span>627.54ms p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>74.31ms p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>132.6ms
</span></span><span style=display:flex><span>     http_req_sending...............: avg<span style=color:#f92672>=</span>39.5µs   min<span style=color:#f92672>=</span>10.5µs   med<span style=color:#f92672>=</span>27.9µs   max<span style=color:#f92672>=</span>254.6µs  p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>78.65µs p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>109.64µs
</span></span><span style=display:flex><span>     http_req_tls_handshaking.......: avg<span style=color:#f92672>=</span>0s       min<span style=color:#f92672>=</span>0s       med<span style=color:#f92672>=</span>0s       max<span style=color:#f92672>=</span>0s       p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>0s      p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>0s
</span></span><span style=display:flex><span>     http_req_waiting...............: avg<span style=color:#f92672>=</span>883.07ms min<span style=color:#f92672>=</span>418.68ms med<span style=color:#f92672>=</span>860.07ms max<span style=color:#f92672>=</span>1.96s    p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>1.14s   p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>1.23s
</span></span><span style=display:flex><span>     http_reqs......................: <span style=color:#ae81ff>158</span>   4.968316/s
</span></span><span style=display:flex><span>     iteration_duration.............: avg<span style=color:#f92672>=</span>1.96s    min<span style=color:#f92672>=</span>1.51s    med<span style=color:#f92672>=</span>1.92s    max<span style=color:#f92672>=</span>3.06s    p<span style=color:#f92672>(</span>90<span style=color:#f92672>)=</span>2.21s   p<span style=color:#f92672>(</span>95<span style=color:#f92672>)=</span>2.33s
</span></span><span style=display:flex><span>     iterations.....................: <span style=color:#ae81ff>158</span>   4.968316/s
</span></span><span style=display:flex><span>     vus............................: <span style=color:#ae81ff>5</span>     min<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>      max<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>     vus_max........................: <span style=color:#ae81ff>10</span>    min<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>     max<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>running <span style=color:#f92672>(</span>0m31.8s<span style=color:#f92672>)</span>, 00/10 VUs, <span style=color:#ae81ff>158</span> complete and <span style=color:#ae81ff>0</span> interrupted iterations
</span></span><span style=display:flex><span>default ✓ <span style=color:#f92672>[======================================]</span> <span style=color:#ae81ff>10</span> VUs  30s
</span></span></code></pre></div><p>the application running on the Docker container is able to handle <code>4.98 requests per second</code>.</p><p>the performance difference between the two environments is mere <code>2.5%</code>.</p><p>as you can see, the application running on the VM performed slightly better than the application running on the Docker container. This is because the VM has direct access to the host machine&rsquo;s resources, while the Docker container has to go through the host machine&rsquo;s operating system to access the resources. However, the performance difference is negligible, and the Docker container is still a viable option for deploying applications.</p><h2 id=why-i-would-choose-docker-over-vms>Why I would choose Docker over VMs
<a href=#why-i-would-choose-docker-over-vms class=h-anchor aria-hidden=true>#</a></h2><p>Docker containers are more portable than VMs, which means they can be easily moved from one environment to another. This makes them ideal for deploying applications on cloud platforms, such as AWS or GCP.</p><p>Horizontal scaling is easier with Docker containers because they are lightweight and can be easily replicated across multiple servers. This allows you to scale your application horizontally without having to worry about the underlying infrastructure.</p><p>Docker containers are more secure than VMs because they are isolated from the host machine&rsquo;s operating system. This means that even if a container is compromised, the host machine will not be affected.</p><h2 id=conclusion>Conclusion
<a href=#conclusion class=h-anchor aria-hidden=true>#</a></h2><p>In this article, we compared the performance differences between running an application on a VM and running it in a Docker container. We found that the application running on the VM performed slightly better than the application running on the Docker container. However, the performance difference was negligible, and the Docker container is still a viable option for deploying applications. We also discussed why I would choose Docker over VMs and why Docker containers are more portable than VMs. I hope you found this article helpful. If you have any questions or comments, please reach out to me. Thank you for reading!</p></div></article></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>developer</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2023 Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span><a href=https://github.com/panr/hugo-theme-hello-friend target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-Z1YJ2MMRYT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Z1YJ2MMRYT",{anonymize_ip:!1})}</script></body></html>